<!-- The button to open modal -->
<label for="my-modal-<%= projet.id %>" class="tooltip tooltip-primary text-left mt-3" data-tip="Cliquez pour en savoir plus...">
  <div class="mt-3">
    <div class="card shadow hover:shadow-xl cursor-pointer duration-300">
      <figure>
        <%= image_tag projet.thumbnail_image_path %>
      </figure>
      <div class="card-body">
        <h2 class="card-title text-primary underline underline-offset-8">
          <%= projet.nom.upcase %>
        </h2>
        <div class="card-actions flex justify-between mt-4">
          <div>
            <% projet.tags.each do |tag| %>
              <div class="badge badge-accent badge-outline"><%= tag %></div>
            <% end %>
          </div>
        </div>
        <p class="my-4 first-line:uppercase first-line:tracking-widest first-letter:text-5xl first-letter:font-bold first-letter:mr-3 first-letter:float-left">
          <%= truncate(projet.contenu, length: 105) %>
        </p>
      </div>
    </div>
  </div>
</label>

<!-- Put this part before </body> tag -->
<input type="checkbox" id="my-modal-<%= projet.id %>" class="modal-toggle" />
<label for="my-modal-<%= projet.id %>" class="modal cursor-pointer">
  <label class="modal-box max-w-max">
    <label for="my-modal-<%= projet.id %>" class="btn btn-primary btn-sm btn-circle absolute right-2 top-2">✕</label>

    <div class="card shadow mx-auto lg:w-4/5 p-4">
      <div class="mx-auto">
        <div id="<%= dom_id projet %>">

          <div class="flex">
            <%= image_tag projet.thumbnail_image_path, class: "rounded w-1/2" %>
            <%= image_tag projet.thumbnail_image_path, class: "rounded w-1/2" %>
          </div>
          
          <h1 class="my-8 text-4xl font-bold text-primary">
            <span class="underline underline-offset-8">
              <%= projet.nom.upcase %>
            </span>
          </h1>

          <p class="my-8">
            <% projet.tags.each do |tag| %>
              <div class="badge badge-accent badge-outline"><%= tag %></div>
            <% end %>
          </p>

          <p class="my-8 first-line:uppercase first-line:tracking-widest first-letter:text-5xl first-letter:font-bold first-letter:mr-3 first-letter:float-left">
            <%= projet.contenu %>
          </p>

          <br>

          <div class="mx-auto max-w-max p-8">
            <div class="stats stats-vertical lg:stats-horizontal shadow">

              <div class="stat">
                <div class="stat-figure text-secondary">
                  <i class="fa-solid fa-code-commit fa-2xl"></i>
                </div>
                <div class="stat-title">Commits GitHub</div>
                <div class="stat-value"><%= number_with_delimiter(projet.commit) %></div>
                <div class="stat-desc">↗︎ 400 (22%)</div>
              </div>
              
              <div class="stat">
                <div class="stat-figure text-secondary">
                  <i class="fa-solid fa-paper-plane fa-2xl"></i>
                </div>
                <div class="stat-title">Déploiements Heroku</div>
                <div class="stat-value"><%= number_with_delimiter(projet.deploy) %></div>
                <div class="stat-desc">↘︎ 90 (14%)</div>
              </div>

              <div class="stat">
                <div class="stat-figure text-secondary">
                  <i class="fa-solid fa-mug-hot fa-2xl"></i>
                </div>
                <div class="stat-title">Tasses de café</div>
                <div class="stat-value"><%= number_with_delimiter((projet.coffee).to_i) %></div>
                <div class="stat-desc">↗︎ 400 (100%)</div>
              </div>

            </div>
          </div>

          <div class="flex justify-between items-center">
            <div class="link link-hover">
              <%= link_to URI.parse(projet.url).host, projet.url, target: "_blank" %>
              <i class="fa-solid fa-arrow-up-right-from-square"></i>
            </div>
            <% if projet.github %>
              <p class="link link-hover">
                <i class="fa-brands fa-github"></i>
                <%= link_to URI.parse(projet.github).path, projet.github, target: "_blank" %>
              </p>
            <% end %>

            <div class="flex items-end float-right rounded w-16 md:w-32 lg:w-64 p-3">
              <%= image_tag projet.logo_image_path if File.exist?("app/assets/images/" + projet.logo_image_path) %>
            </div>
          </div>

        </div>

        <% if user_signed_in? %>
          <%= link_to 'Edit this projet', edit_projet_path(projet), class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
          <div class="inline-block ml-2">
            <%= button_to 'Destroy this projet', projet_path(projet), method: :delete, class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 font-medium" %>
          </div>
          <%= link_to 'Back to projets', projets_path, class: "ml-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
        <% end %>
      </div>
    </div>
  </label>
</label>